

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Mvc5Starterkit &mdash; Izenda BI 3.2.1 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/favicon.png"/>
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Izenda BI 3.2.1 documentation" href="../index.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Izenda BI
          

          
            
            <img src="../_static/logo2.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                3.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../intro/.intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/.install.html">Installation and Maintenance Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/.administrator_guide.html">Administrator Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ui/.user_guide.html">User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href=".developer_guide.html">Developer Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/.system_reference.html">System Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/.faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ref/.glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference external" href="http://wiki.izenda.us">6 Series Documentation</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Izenda BI</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Mvc5Starterkit</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/dev/code_mvc5starterkit.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mvc5starterkit">
<h1>Mvc5Starterkit<a class="headerlink" href="#mvc5starterkit" title="Permalink to this headline">¶</a></h1>
<p><em>Understanding The MVC Starter Kit</em> outlines the contents of the kit and
where particular functionality is showcased.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The MVC Kit is designed for demonstration purposes and should not be
used as an &#8220;as-is&#8221; fully-integrated solution. You can use the kit for
reference or a baseline but ensure that security and customization meet
the standards of your company.</p>
</div>
<p>For MVC set up steps, please refer to the <a class="reference internal" href="../install/doc_mvc_setup_guide.html"><span class="doc">MVC Setup Guide</span></a>.</p>
<div class="section" id="packages-used">
<h2>Packages Used<a class="headerlink" href="#packages-used" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>The following is not a comprehensive list but it will give you a good idea of the packages used for Izenda’s authentication/authorization.</dt>
<dd><ul class="first last simple">
<li><strong>.Net MVC5 Starter Project:</strong> In order to maintain simplicity, our kit uses Microsoft’s default MVC5 Project structure. There may be slight modifications to the code to showcase certain Izenda concepts. This skeleton simulates the role of your application in the embedded process. For more information of the default structure, please see <a class="reference external" href="http://jameschambers.com/2014/06/day-2-examining-the-solution-structure/">http://jameschambers.com/2014/06/day-2-examining-the-solution-structure/</a></li>
<li><dl class="first docutils">
<dt><strong>OWIN Authentication:</strong> In our kit, the OWIN Authentication component simulates the method of logging in to your application. Once you are authenticated with your application, a UserInfo object is generated that contains the username and tenant needed for Izenda authorization.</dt>
<dd><ul class="first last">
<li>Where/how your authorization token is generated/stored is completely up to you.</li>
<li>For more information, please visit <a class="reference external" href="https://blogs.msdn.microsoft.com/webdev/2013/07/03/understanding-owin-forms-authentication-in-mvc-5/">https://blogs.msdn.microsoft.com/webdev/2013/07/03/understanding-owin-forms-authentication-in-mvc-5/</a></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Izenda:</strong> The main goal of the project is to showcase how to embed Izenda into your MVC application. Of the Izenda portion of the kit, there are components that are required standards for Izenda and other components that are designed as useful guidelines for managing and rendering Izenda. The following are not comprehensive lists—if you have any additional questions regarding what is required, please contact our support team.</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Required: Required components should not be changed at their core. If they are modified, unexpected behavior may occur.</dt>
<dd><ul class="first last">
<li>All API resources downloaded from <a class="reference external" href="http://downloads.izenda.com/latest/API.zip">http://downloads.izenda.com/latest/API.zip</a> . Decompilations of the packaged API is strictly prohibited by your EULA.</li>
<li>All Embedded UI resources downloaded from <a class="reference external" href="http://downloads.izenda.com/latest/EmbeddedUI.zip">http://downloads.izenda.com/latest/EmbeddedUI.zip</a> . Note: If an open source version of the Embedded UI is released, modifications will not be supported by the Izenda Support team. Decompilations of the packaged Embedded UI is strictly prohibited by your EULA.</li>
<li>Where/how your authorization is stored is completely up to you. For embedded scenarios, however, we require that you provide the Izenda user name and the unique tenant name.</li>
</ul>
</dd>
</dl>
</li>
<li>Suggested: Our kit is home to a plethora of embedded examples ranging from tenant CSS cusomization to numerous configurations of rendering the Izenda UI. These examples may not be necessary to build a fully-operational Application. For more information, please see the &#8220;Location and Description of Features&#8221; section below.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="section" id="location-and-description-of-features">
<h3>Location and Description of Features<a class="headerlink" href="#location-and-description-of-features" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><em>This section outlines the key features of the MVC starter kit and
which files to review for each feature.</em></div></blockquote>
</div>
</div>
<div class="section" id="unique-styling-for-tenants">
<h2>Unique Styling For Tenants<a class="headerlink" href="#unique-styling-for-tenants" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Content Folder for tenants<ul>
<li>Equals TenantID</li>
<li>Top of Layout.cshtml</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="izenda-user-creation">
<h2>Izenda User Creation<a class="headerlink" href="#izenda-user-creation" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>AccountController.cs<ul>
<li>Register, line 162</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="izenda-user-authentication">
<h2>Izenda User Authentication<a class="headerlink" href="#izenda-user-authentication" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Login.cshtml:</strong> User input form for login information</li>
<li><strong>UserInfo.cs:</strong> Contains the definition of the token required for Izenda. This includes 2 public strings UserName and TenantUniqueName. Upon successful authentication, a UserInfo object is created in the model.</li>
<li><strong>UserController.cs:</strong> The UserController only handles users logging
into the MVC application. Once they log in, a token generated with
their information that will then be used in IzendaTokenAuthorization</li>
<li><strong>IzendaTokenAuthorization.cs</strong>
* GetToken (line 18): Used to get/generate the token based off of a UserInfo object in order to use it for RESTful API calls. This function is called whenever you are attempting an Izenda process.
* GetUserInfo (line 36): Takes the token from Izenda and decrypts it to get the user info to use it for RESTful API calls</li>
<li><strong>AccountController.cs</strong><ul>
<li>Login, line 73</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="rendering-izenda-ui">
<h2>Rendering Izenda UI<a class="headerlink" href="#rendering-izenda-ui" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><strong>Izenda.integrate.js:</strong> This is the backbone for rendering Izenda into our kit. The 216 lines of code contain a plethora of examples of how to render single Izenda components, how to render single Izenda pages, and even how to embed Izenda as a whole. You are certainly welcome to use this file in your own development but you may find it useful to tailor it to your needs.</li>
<li>Views -&gt; Home and Views -&gt; Report</li>
</ul>
</div>
<div class="section" id="rendering-report-parts-reports">
<h2>Rendering Report Parts &amp; Reports<a class="headerlink" href="#rendering-report-parts-reports" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Report Parts are rendered using Mvc5StarterKit -&gt; Views -&gt; Report -&gt; ReportParts.cshtml</li>
<li>Report Parts to be rendered are defined by report part id in Mvc5StarterKit -&gt; Scripts -&gt; izenda.integrate.js</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">izendaInitReportPartDemo</span> <span class="o">=</span> <span class="n">function</span> <span class="p">()</span> <span class="p">{</span>

        <span class="n">function</span> <span class="n">successFunc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">console</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
                <span class="n">var</span> <span class="n">currentUserContext</span> <span class="o">=</span> <span class="p">{</span>
                        <span class="n">token</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">token</span>
                <span class="p">};</span>

                <span class="o">//</span> <span class="n">You</span> <span class="n">can</span> <span class="n">add</span> <span class="n">report</span> <span class="n">parts</span> <span class="n">after</span> <span class="n">creating</span> <span class="n">reports</span> <span class="n">using</span> <span class="n">the</span> <span class="n">context</span> <span class="n">below</span>
                <span class="o">//</span> <span class="n">Add</span> <span class="n">the</span> <span class="n">report</span> <span class="n">part</span> <span class="n">ID</span><span class="s1">&#39;s in the &lt;add your report part id here&gt; area</span>
                <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">setCurrentUserContext</span><span class="p">(</span><span class="n">currentUserContext</span><span class="p">);</span>
                <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">renderReportPart</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;izenda-report-part1&#39;</span><span class="p">),</span> <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;insert your id here&gt;&quot;</span><span class="p">,</span>
                <span class="p">});</span>

                <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">renderReportPart</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;izenda-report-part2&#39;</span><span class="p">),</span> <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;insert your id here&gt;&quot;</span><span class="p">,</span>
                <span class="p">});</span>

                <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">renderReportPart</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;izenda-report-part3&#39;</span><span class="p">),</span> <span class="p">{</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;insert your id here&gt;&quot;</span>
                <span class="p">});</span>
        <span class="p">}</span>
        <span class="n">this</span><span class="o">.</span><span class="n">DoRender</span><span class="p">(</span><span class="n">successFunc</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
<ul class="simple">
<li>Reports can be rendered using a specific report id using Mvc5StarterKit -&gt; Views -&gt; Report -&gt; ReportViewer.cshtml</li>
<li>The report id can be configured Mvc5StarterKit -&gt; Views -&gt; Shared -&gt; _Layout.cshtml</li>
</ul>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">li</span><span class="o">&gt;</span><span class="nd">@Html</span><span class="o">.</span><span class="n">ActionLink</span><span class="p">(</span><span class="s2">&quot;Report Viewer&quot;</span><span class="p">,</span> <span class="s2">&quot;ReportViewer&quot;</span><span class="p">,</span> <span class="s2">&quot;Report&quot;</span><span class="p">,</span> <span class="n">new</span> <span class="p">{</span> <span class="nb">id</span> <span class="o">=</span> <span class="s2">&quot;&lt;add your report id here&gt;&quot;</span> <span class="p">},</span> <span class="n">null</span><span class="p">)</span><span class="o">&lt;/</span><span class="n">li</span><span class="o">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="hidden-filters">
<h2>Hidden Filters<a class="headerlink" href="#hidden-filters" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Hidden Filter examples are shown in Mvc5StarterKit -&gt; IzendaBoundary -&gt; CustomAdhocReport.cs</li>
</ul>
<div class="section" id="understanding-the-front-end-contents">
<h3>Understanding the Front End Contents<a class="headerlink" href="#understanding-the-front-end-contents" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><em>This section outlines the front end components defined in the MVC
starter kit. It does not outline Izenda&#8217;s front end but rather the
front end components a developer might define in an integrated
scenario.</em></div></blockquote>
</div>
<div class="section" id="understanding-the-back-end-contents">
<h3>Understanding the Back End Contents<a class="headerlink" href="#understanding-the-back-end-contents" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><em>This section outlines the back end components defined in the MVC
starter kit. It does not outline Izenda&#8217;s API but rather the back
end components a developer might define in an integrated scenario.</em></div></blockquote>
</div>
</div>
<div class="section" id="app-start">
<h2>App_Start<a class="headerlink" href="#app-start" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>This folder is contained at the root directory and is among the main
driving components of an MVC Solution. This folder&#8217;s classes are
explained below</p>
<ul>
<li><p class="first"><strong>Startup.Auth.cs:</strong> This class supports OWIN authentication. For a
high level understanding, OWIN defines a standard interface between .NET
web servers and web applications. The Startup.Auth.cs gives you the
flexibility to integrate your application to allow users for quick
authentication modes such as using google and facebook accounts as their
preferred logins.</p>
</li>
<li><p class="first"><strong>BundleConfig.cs</strong>: This class allows developers to bundle
javascript and css files. With so many javascript and css classes that
an MVC solution might reference, each call to a resource for example has
the potential to reference multiple of these files which as a result can
significantly impact the load time of a page. Below are some of Izenda&#8217;s
bundled javascipt files to allow your page for faster rendering.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">bundles</span><span class="p">.</span><span class="nx">Add</span><span class="p">(</span><span class="k">new</span> <span class="nx">ScriptBundle</span><span class="p">(</span><span class="s2">&quot;^/bundles/izenda&quot;</span><span class="p">).</span><span class="nx">Include</span><span class="p">(</span>
                        <span class="s2">&quot;^/Scripts/izenda/izenda_common.js&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;^/Scripts/izenda/izenda_locales.js&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;^/Scripts/izenda/izenda_vendors.js&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;^/Scripts/izenda/izenda_ui.js&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;^/Scripts/izenda.integrate.js&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;^/Scripts/izenda.utils.js&quot;</span><span class="p">));</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>RouteConfig.cs:</strong> This class contains all the routing
configuration for your urls in an MVC application. A Route simply
defines a url pattern that is mapped to handler. Notice, that the url
doesn&#8217;t necessarily have to point to a file. A developer can define a
more user friendly url pattern. This in return will be mapped to a
handler to reference the MVC controllers.</p>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="izenda-s-web-config-overview">
<h2>Izenda&#8217;s Web.config overview<a class="headerlink" href="#izenda-s-web-config-overview" title="Permalink to this headline">¶</a></h2>
<p>Izenda utilizes <strong>Nancy</strong>, a light-weight framework for building HTTP
based services on .NET and Mono. Nancy supports all the common HTTP
methods such as the DELETE, GET, HEAD, OPTIONS, POST, PUT and PATCH
requests.</p>
<p>Below is the default configuration for both httpHandlers and Handlers
settings.</p>
<div class="highlight-xml"><div class="highlight"><pre><span></span><span class="nt">&lt;httpHandlers&gt;</span>
      <span class="nt">&lt;add</span> <span class="na">verb=</span><span class="s">&quot;*&quot;</span> <span class="na">type=</span><span class="s">&quot;Nancy.Hosting.Aspnet.NancyHttpRequestHandler&quot;</span> <span class="na">path=</span><span class="s">&quot;api/*&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/httpHandlers&gt;</span>

<span class="nt">&lt;handlers&gt;</span>
      <span class="nt">&lt;add</span> <span class="na">name=</span><span class="s">&quot;Nancy&quot;</span> <span class="na">verb=</span><span class="s">&quot;*&quot;</span> <span class="na">type=</span><span class="s">&quot;Nancy.Hosting.Aspnet.NancyHttpRequestHandler&quot;</span> <span class="na">path=</span><span class="s">&quot;api/*&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/handlers&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>httpHandlers -&gt;     this setting is used for sites running on  IIS 5 – 6, or IIS 7.x in Classic mode (IIS 6 compatibility mode).</li>
<li>handlers     -&gt;     this setting is used for sites running on sites running on IIS 7.x (Integrated mode).</li>
</ul>
</div>
<div class="section" id="understanding-the-data-model">
<h3>Understanding the Data Model<a class="headerlink" href="#understanding-the-data-model" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><em>This section outlines the databases defined in the MVC starter
kit.</em></div></blockquote>
</div>
</div>
<div class="section" id="izenda-configuration-database">
<h2>Izenda Configuration Database<a class="headerlink" href="#izenda-configuration-database" title="Permalink to this headline">¶</a></h2>
<p><a class="reference internal" href="../ref/spec_izendasystemsetting_table.html"><span class="doc">IzendaSystemSetting table</span></a></p>
</div>
<div class="section" id="mvc5-user-database">
<h2>MVC5 User Database<a class="headerlink" href="#mvc5-user-database" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div>&#8216;&#8217;The MVC5 User Database is located within the <em>&#8216;[insert database
location here]. It simulates a your company&#8217;s database information
and is used to accurately route to a user in the Izenda
Configuration Database.</em></div></blockquote>
</div>
<div class="section" id="methods-of-calling-the-izenda-api">
<h2>Methods of Calling the Izenda API<a class="headerlink" href="#methods-of-calling-the-izenda-api" title="Permalink to this headline">¶</a></h2>
<dl class="docutils">
<dt>Depending on your deployment mode, you may want to invoke the Izenda API in different ways. Our standard MVC Kit provides examples for both RESTful API Calls and .Net API Calls</dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>RESTful API Calls</dt>
<dd><ul class="first last">
<li>Home Controller</li>
<li><dl class="first docutils">
<dt>IzendaUtlility.cs</dt>
<dd><ul class="first last">
<li>Add Role</li>
<li>Alter Data Sources</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>.Net API Calls</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>Home Controller</dt>
<dd><ul class="first last">
<li>GetToken (line 481): Hard-coded for the default admin to allow user to set Izenda database connection string and license key</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Account Controller</dt>
<dd><ul class="first last">
<li>Account/login (line 73): Login to your.net application with tenant, email, password</li>
<li>Register</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
<div class="section" id="updates">
<h3>Updates<a class="headerlink" href="#updates" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="id1">
<h2>06/23/2017<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>If you are using a different route thatn Izenda&#8217;s default API route (/api), the URL must be set in the web.config.</p>
</div>
<div class="section" id="id2">
<h2>05/08/2017<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p><strong>Updates to the Mvc5StarterKit required for exporting:</strong></p>
<p>If your API is separate (deployment mode 1), you will need to set Public and Private RSA Keys. Previous versions of the deployment mode didn’t require any sort of keys and, since you don’t need a password to be authorized for this deployment mode, you can simply call the API with the tenant unique name and user name have access to Izenda (bad). We implemented the RSA Keys for verification that the source of your API calls are correct.</p>
<p>With the latest update of Izenda, we have made a few changes to the database to ensure that deployment mode 1 is as secure as deployment modes 0 and 3. There are now two RSA keys (public and private) found within Izenda. Since these values aren&#8217;t updated, a System.Security.XmlSyntaxException was thrown and documented in your log file.</p>
<p>The keys can be declared in the following locations:</p>
<blockquote>
<div><ol class="arabic simple">
<li>AuthRSAPublicKey value in the IzendaSystemSettings table of the Izenda database (note: only use keysize &lt; 1024 to generate because max-length for this field in database is 256) . This value is your public key and should be in XML format.</li>
<li>And RSAPrivateKey value in Web.config file of the MVC Kit. This value is your private key and should be in PEM format.</li>
</ol>
</div></blockquote>
<p>To generate your RSA keys, you can use our RSA Key Generator utility found at <a class="reference external" href="http://downloads.izenda.com/Utilities/Izenda.Synergy.RSATool.zip">http://downloads.izenda.com/Utilities/Izenda.Synergy.RSATool.zip</a> .</p>
</div>
<div class="section" id="id3">
<h2>02/08/2017<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p><strong>Updates to the Mvc5StarterKit required for exporting:</strong></p>
<p>1. Ensure you have set the front end url in the IzendaSystemSettings
table for WebUrl If you are using the standard MvcStarterKit it will be
set in dbo.IzendaSystemSetting table in Izenda.mdf file. The standard
value for the kit is: <a class="reference external" href="http://localhost:14809/">http://localhost:14809/</a></p>
<p>2. Add a new route to Mvc5StarterKit/App_Start/RouteConfig.cs
routes.MapRoute(</p>
<div class="line-block">
<div class="line"><code class="docutils literal"><span class="pre">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name:&nbsp;&quot;ReportPart&quot;,</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url:&nbsp;&quot;viewer/reportpart/{id}&quot;,</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaults:&nbsp;new&nbsp;{&nbsp;controller&nbsp;=&nbsp;&quot;Home&quot;,&nbsp;action&nbsp;=&nbsp;&quot;ReportPart&quot;&nbsp;}</span></code></div>
<div class="line"><code class="docutils literal"><span class="pre">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);</span></code></div>
</div>
<p>3. Add the following method to
Mvc5StarterKit/Controllers/HomeController.cs</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">public</span> <span class="n">ActionResult</span> <span class="n">ReportPart</span><span class="p">(</span><span class="n">Guid</span> <span class="nb">id</span><span class="p">,</span> <span class="n">string</span> <span class="n">token</span><span class="p">)</span>
       <span class="p">{</span>
           <span class="n">ViewBag</span><span class="o">.</span><span class="n">Id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">;</span>
           <span class="n">ViewBag</span><span class="o">.</span><span class="n">Token</span> <span class="o">=</span> <span class="n">token</span><span class="p">;</span>
           <span class="k">return</span> <span class="n">View</span><span class="p">();</span>
       <span class="p">}</span>
</pre></div>
</div>
<p>4. Add the following methods to
Mvc5StarterKit/Scripts/izenda.integrate.js</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">Render</span> <span class="n">report</span> <span class="n">part</span>
<span class="n">var</span> <span class="n">izendaInitReportPartViewer</span> <span class="o">=</span> <span class="n">function</span> <span class="p">(</span><span class="n">reportPartId</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">function</span> <span class="n">successFunc</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">status</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">var</span> <span class="n">currentUserContext</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">token</span><span class="p">:</span> <span class="n">data</span><span class="o">.</span><span class="n">token</span>
        <span class="p">};</span>
        <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">setCurrentUserContext</span><span class="p">(</span><span class="n">currentUserContext</span><span class="p">);</span>
        <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">renderReportPart</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;izenda-root&#39;</span><span class="p">),</span> <span class="p">{</span>
            <span class="nb">id</span><span class="p">:</span> <span class="n">reportPartId</span>
        <span class="p">});</span>
    <span class="p">}</span>
    <span class="n">this</span><span class="o">.</span><span class="n">DoRender</span><span class="p">(</span><span class="n">successFunc</span><span class="p">);</span>
<span class="p">};</span>
<span class="n">var</span> <span class="n">izendaInitReportPartExportViewer</span> <span class="o">=</span> <span class="n">function</span> <span class="p">(</span><span class="n">reportPartId</span><span class="p">,</span> <span class="n">token</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">var</span> <span class="n">currentUserContext</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">token</span><span class="p">:</span> <span class="n">token</span>
    <span class="p">};</span>
    <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">setCurrentUserContext</span><span class="p">(</span><span class="n">currentUserContext</span><span class="p">);</span>
    <span class="n">IzendaSynergy</span><span class="o">.</span><span class="n">renderReportPart</span><span class="p">(</span><span class="n">document</span><span class="o">.</span><span class="n">getElementById</span><span class="p">(</span><span class="s1">&#39;izenda-root&#39;</span><span class="p">),</span> <span class="p">{</span>
        <span class="nb">id</span><span class="p">:</span> <span class="n">reportPartId</span><span class="p">,</span>
        <span class="n">useQueryParam</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
        <span class="n">useHash</span><span class="p">:</span> <span class="n">false</span>
    <span class="p">});</span>
<span class="p">};</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li>Create a new View named Mvc5StarterKit/Views/Home/ReportPart.cshtml:</li>
</ol>
<div class="highlight-default"><div class="highlight"><pre><span></span>@{
   Layout = &quot;^/Views/Shared/Izenda_Layout.cshtml&quot;;
   ViewBag.Title = &quot;Report Viewer&quot;;
}

@section scripts
{
   &lt;script type=&quot;text/javascript&quot;&gt;
       $(document).ready(function () {
           izendaInitReportPartExportViewer(&#39;@ViewBag.Id&#39;, &#39;@ViewBag.Token&#39;);

       });
   &lt;/script&gt;
}
&lt;style&gt;
   #izenda-root&gt;.izenda {
       background-color: transparent !important;
   }
&lt;/style&gt;

&lt;div class=&quot;izenda-container&quot; id=&quot;izenda-root&quot; style=&quot;margin-top:0px;&quot;&gt;&lt;/div&gt;
</pre></div>
</div>
<p>6. Move the line below in
Mvc5StarterKit/Views/Shared/Izenda_Layout.cshtml Move line below
(originally at line 58)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@RenderSection</span><span class="p">(</span><span class="s2">&quot;scripts&quot;</span><span class="p">,</span> <span class="n">required</span><span class="p">:</span> <span class="n">false</span><span class="p">)</span>
</pre></div>
</div>
<p>Just before the closing body tag, e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="nd">@RenderSection</span><span class="p">(</span><span class="s2">&quot;scripts&quot;</span><span class="p">,</span> <span class="n">required</span><span class="p">:</span> <span class="n">false</span><span class="p">)</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Move the line below in Mvc5StarterKit/Views/Shared/_Layout.cshtml</li>
</ol>
<p>Move line below (originally at line 99)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@RenderSection</span><span class="p">(</span><span class="s2">&quot;scripts&quot;</span><span class="p">,</span> <span class="n">required</span><span class="p">:</span> <span class="n">false</span><span class="p">)</span>
</pre></div>
</div>
<p>Just before the closing body tag, e.g.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>   <span class="nd">@RenderSection</span><span class="p">(</span><span class="s2">&quot;scripts&quot;</span><span class="p">,</span> <span class="n">required</span><span class="p">:</span> <span class="n">false</span><span class="p">)</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>8. Alter the file Mvc5StarterKit/Web.config (Optional) At line 44,
change the extension of the Izenda-log file to .log</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">file</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;logs\izenda-log.txt&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>Change to</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">file</span> <span class="n">value</span><span class="o">=</span><span class="s2">&quot;logs\izenda-log.log&quot;</span> <span class="o">/&gt;</span>
</pre></div>
</div>
<p>9. Edit the Post Build Events replace what is currently there with
below. This will allow maps to be used as report parts in the
Mvc5StarterKit:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">XCOPY</span> <span class="o">/</span><span class="n">S</span> <span class="o">/</span><span class="n">I</span> <span class="o">/</span><span class="n">Y</span>  <span class="s2">&quot;$(ProjectDir)IzendaResources\Content&quot;</span> <span class="s2">&quot;$(ProjectDir)</span><span class="se">\b</span><span class="s2">in\Content</span><span class="se">\&quot;</span>
<span class="n">XCOPY</span> <span class="o">/</span><span class="n">S</span> <span class="o">/</span><span class="n">I</span> <span class="o">/</span><span class="n">Y</span>  <span class="s2">&quot;$(ProjectDir)IzendaResources\EmailTemplates&quot;</span> <span class="s2">&quot;$(ProjectDir)</span><span class="se">\b</span><span class="s2">in\EmailTemplates</span><span class="se">\&quot;</span>
<span class="n">XCOPY</span> <span class="o">/</span><span class="n">S</span> <span class="o">/</span><span class="n">I</span> <span class="o">/</span><span class="n">Y</span>  <span class="s2">&quot;$(ProjectDir)IzendaResources\Export&quot;</span> <span class="s2">&quot;$(ProjectDir)</span><span class="se">\b</span><span class="s2">in\Export</span><span class="se">\&quot;</span>
<span class="n">XCOPY</span> <span class="o">/</span><span class="n">S</span> <span class="o">/</span><span class="n">I</span> <span class="o">/</span><span class="n">Y</span>  <span class="s2">&quot;$(ProjectDir)IzendaReferences\Resources&quot;</span> <span class="s2">&quot;$(ProjectDir)</span><span class="se">\b</span><span class="s2">in\Resources</span><span class="se">\&quot;</span>
<span class="n">XCOPY</span> <span class="o">/</span><span class="n">S</span> <span class="o">/</span><span class="n">I</span> <span class="o">/</span><span class="n">Y</span>  <span class="s2">&quot;$(ProjectDir)IzendaResources\Content\maps&quot;</span> <span class="s2">&quot;$(ProjectDir)\Content\maps</span><span class="se">\&quot;</span>
</pre></div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Izenda.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'3.2.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-75560-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-75560-1');
</script>



</body>
</html>